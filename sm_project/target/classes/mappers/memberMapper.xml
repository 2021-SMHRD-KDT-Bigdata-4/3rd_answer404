<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="memberMapper">
  
  	<insert id="memberInsert">
  		insert into member(member_id, member_password, member_name, member_age_range, member_gender, member_phone, admin_id) 
   		values (#{member_id},#{member_password},#{member_name},#{member_age_range},#{member_gender},#{member_phone},'admin')
  	</insert>
  	
  	<select id="memberLogin" resultType="kr.co.summary.domain.MemberVO">
		select * from member where member_id = #{member_id} and member_password = #{member_password}
	</select>
	
	<select id="scrapShow" parameterType="hashMap" resultType="kr.co.summary.domain.ScrapVO">
		select * from(select rownum as rnum, s.* 
		from scrap s where member_id= #{member_id} order by s.scrap_index desc)
		 where rnum between #{displayPost} and #{displayPostEnd}
	</select>
	
	<select id="scrapCount" resultType="int">
		select count(scrap_index) from scrap
	</select>
	
	<delete id="scrapDelete">
		delete from scrap where scrap_index= #{scrap_index}
	</delete>
	<insert id="scrapInsert">
	     
	    insert into scrap(SCRAP_INDEX,scrap_memo,NEWS_INDEX,NEWS_TITLE,NEWS_IMAGE,MEMBER_ID)
	    values ( scrap_index_seq.nextval,'Memo',#{news_index},#{news_title},#{news_image},#{member_id})	    
	</insert>
	<update id="scrapMemoUpdate">
		update scrap set scrap_memo =#{scrap_memo} where member_id = #{member_id} and scrap_index= #{scrap_index}
	</update>
	
	<select id="showChartFM" resultType="kr.co.summary.domain.ChartVO">
			select * from
			(select rownum as rnum, s.* from
			(select news_keyword ,count(*) cnt from statistics
			where member_gender = '여자' group by news_keyword order by cnt desc) s)
			where rnum between 1 and 5
	</select>
	<select id="showChartM" resultType="kr.co.summary.domain.ChartVO">
			select * from
			(select rownum as rnum, s.* from
			(select news_keyword ,count(*) cnt from statistics
			where member_gender = '남자' group by news_keyword order by cnt desc) s)
			where rnum between 1 and 5
	</select>
	
  </mapper>